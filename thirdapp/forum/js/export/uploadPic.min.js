!function e(t, i, n) {
    function a(r, s) {
        if (!i[r]) {
            if (!t[r]) {
                var l = "function" == typeof require && require;
                if (!s && l)
                    return l(r, !0);
                if (o)
                    return o(r, !0);
                throw new Error("Cannot find module '" + r + "'")
            }
            var c = i[r] = {
                exports: {}
            };
            t[r][0].call(c.exports, function(e) {
                var i = t[r][1][e];
                return a(i ? i : e)
            }, c, c.exports, e, t, i, n)
        }
        return i[r].exports
    }
    for (var o = "function" == typeof require && require, r = 0; r < n.length; r++)
        a(n[r]);
    return a
}({
    1: [function(e, t) {
        function i(e, t) {
            this.boxWrap = e.boxWrap,
            this.searchBool = !1,
            this.windowHeight = e.windowHeight,
            this.sendBtn = e.sendBtn;
            var i = new n;
            this.aiteWrap = void 0 == typeof e.aiteWrap || 0 == e.aiteWrap.length ? null : e.aiteWrap;
            var a = this;
            $(window).on("popstate", function() {
                a.scrollAuto(),
                a.aiteWrap.fadeOut(),
                a.searchBool && a.aiteWrap.remove()
            }),
            this.init = function(e) {
                var t = this;
                if (t.cb = e,
                void 0 != typeof t)
                    if (this.scrollHidden(),
                    t.aiteWrap)
                        t.aiteWrap.fadeIn(),
                        history.pushState("aiteList", "联系人", "");
                    else {
                        var i = t.tpl();
                        t.aiteWrap = i,
                        t.aiteWrap.appendTo(document.body),
                        $("#searchAiteBtn", t.aiteWrap).click(function() {
                            var e = $(".searchContent", t.aiteWrap).val();
                            null != e && "" != e && t.searchContact()
                        }),
                        $(".del-search", t.aiteWrap).on("click", function() {
                            $(".searchContent", t.aiteWrap).val(""),
                            $(".searchContent", t.aiteWrap).focus(),
                            $(".del-search", t.aiteWrap).css("display", "none")
                        }),
                        $(".keyword", t.aiteWrap).on("keyup", function() {
                            var e = $(this).val();
                            null != e && "" != e ? $(".del-search", t.aiteWrap).css("display", "inline-block") : $(".del-search", t.aiteWrap).css("display", "none")
                        }),
                        $(".keyword", t.aiteWrap).on("focus", function() {
                            ("" == $(this).val() || null == $(this).val()) && $(this).val(" ")
                        }),
                        $(".select-from-app span", t.aiteWrap).on("click", function() {
                            var e = t.sendBtn.attr("data-yzj-aite");
                            XuntongJSBridge.call("selectPerson", {
                                isMulti: !0
                            }, function(i) {
                                ("true" == i.success || i.success === !0) && ($.each(i.data.persons, function(i, n) {
                                    Tribe.util.insert(t.boxWrap[0], Tribe.util.getCaret(t.boxWrap[0]), "@" + n.personName + "  "),
                                    e = "" == e ? n.personName + ":" + n.personId : e + "," + n.personName + ":" + n.personId
                                }),
                                t.sendBtn.attr("data-yzj-aite", e),
                                t.aiteWrap.fadeOut())
                            })
                        }),
                        t.getData(),
                        history.pushState("aiteList", "联系人", "")
                    }
            }
            ,
            this.tpl = function() {
                var e = "";
                return t && (e = "<div class='select-from-app'><span>从同事中选择</span></div>"),
                $("<div class='person-list-wrapper topic-list-wrapper none'  style='height:" + this.windowHeight + "px'>" + e + "<div class='wordsEditor'><div class='wordsBox'><input class='searchContent keyword' placeholder='输入用户名' /><a class='del-search'></a></div><a id='searchAiteBtn' class='search-btn'>搜 索</a></div><p class='titleTab titName'></p><ul style='' class='contactList'></ul></div>")
            }
            ,
            this.tplJude = function(e, t) {
                var n = this
                  , a = $(e).find("ul")
                  , t = t;
                if (void 0 == typeof t || 0 == t.length) {
                    var o = $(".searchContent", n.aiteWrap).val();
                    void 0 == o && (o = ""),
                    this.searchBool ? ($(".titleTab", n.aiteWrap).text("搜索结果"),
                    $(".contactList", n.aiteWrap).text("已经尽力了，还是找不到" + o)) : ($(".titleTab", n.aiteWrap).text("最近联系人"),
                    $(".contactList", n.aiteWrap).text(""))
                } else {
                    var r = function(e) {
                        var i = {
                            id: "",
                            name: "all" + (e ? "(还剩余" + e + "次)" : ""),
                            avatarUrl: ""
                        };
                        t.unshift(i),
                        l()
                    }
                      , s = function(e) {
                        e ? i.hasALLNum(r) : l()
                    }
                    ;
                    i.isUserAdmin(s);
                    var l = function() {
                        _.each(t, function(e) {
                            var t = n.chooseItem(e);
                            a.append(t),
                            $(t).click(function() {
                                var t = e;
                                return function() {
                                    n.itemChoose(t)
                                }
                            }())
                        })
                    }
                }
                n.searchBool || n.aiteWrap.fadeIn();
                var c = $(window).height() - $(".wordsEditor").height() - $(".titName").height();
                c && c > 0 && $(".contactList").css("height", c + "px")
            }
            ,
            this.chooseItem = function(e) {
                var t = "<li class='aite-item' id='<%=id%>'><span class='aite-img avatar'><%if(avatarUrl == undefined || avatarUrl == ''){%><img src='thirdapp/forum/img/load.png' class='avatar-img'/><%}else{%><img src='<%=avatarUrl%>' class='avatar-img'/><%}%></span><span class='name'><b><%=name%></b></span></li>";
                return t = $(_.template(t)(e))
            }
            ,
            this.itemChoose = function(e) {
                var t = this
                  , i = e.name;
                this.scrollHidden();
                t.boxWrap.text();
                if ("" == e.id)
                    Tribe.util.insert(t.boxWrap[0], Tribe.util.getCaret(t.boxWrap[0]), "@all  ");
                else {
                    Tribe.util.insert(t.boxWrap[0], Tribe.util.getCaret(t.boxWrap[0]), "@" + i + "  ");
                    var n = t.sendBtn.attr("data-wx-aite");
                    n = "" == n ? e.name + ":" + e.id : n + "," + e.name + ":" + e.id,
                    t.sendBtn.attr("data-wx-aite", n)
                }
                t.aiteWrap.fadeOut(),
                t.searchBool && (t.aiteWrap.remove(),
                t.aiteWrap = null ),
                $(".searchContent", t.aiteWrap).val(""),
                t.searchBool = !1,
                t.boxWrap.focus();
                var a = t.boxWrap.val();
                t.boxWrap.val(""),
                t.boxWrap.val(a),
                "function" == typeof t.cb && t.cb()
            }
            ,
            this.searchContact = function() {
                $(".searchContent", this.aiteWrap).val();
                this.searchBool = !0;
                this.getData()
            }
            ,
            this.getData = function() {
                var e = this
                  , t = $(".searchContent", this.aiteWrap).val();
                t && "" != t && null != t || (t = ""),
                $.ajax({
                    type: "get",
                    url: "thirdapp/forum/recentContacts",
                    dataType: "json",
                    data: {
                        criteria: t
                    }
                }).done(function(t) {
                    return void 0 != t.error ? void console.log("请求最近联系人列表错误") : (e.searchBool ? $(".titleTab", this.aiteWrap).text("搜索结果") : $(".titleTab", e.aiteWrap).text("最近联系人"),
                    $(".contactList", this.aiteWrap).text(""),
                    void e.tplJude(e.aiteWrap, t))
                })
            }
            ,
            this.scrollAuto = function() {
                $("body").css("height", "auto"),
                document.body.style.overflow = "auto",
                document.documentElement.style.overflow = "auto"
            }
            ,
            this.scrollHidden = function() {
                var e = $(window).height();
                $("body").css("height", e + "px"),
                document.body.style.overflow = "hidden",
                document.documentElement.style.overflow = "hidden"
            }
        }
        var n = e("../lib/public/requestUrl").RequestUrl;
        t.exports = i
    }
    , {
        "../lib/public/requestUrl": 15
    }],
    2: [function(e, t) {
        "use strict";
        var i = e("./getUserInfo")
          , n = {
            init: function() {
                if (/aliapp/.test(navigator.userAgent.toLowerCase())) {
                    var e = n;
                    i().then(function(t) {
                        var i = t.message
                          , n = i.name
                          , a = i.alipayAccount;
                        $(".personal img").attr("src", "/space/c/photo/load?id=" + t.message.photoId),
                        n == a && ($("body").append(e.modifyUserNameTpl(n)),
                        e.modifyUserName())
                    })
                }
            },
            modifyUserNameTpl: function(e) {
                var t = '<div class="modify-user-overlay" style="height: ' + $(window).height() + 'px"></div><div class="modify-user-dialog" style="position:fixed;top: 0;"><div class="niduft-main">   <p class="name-title">你现在的社区昵称是：</p>   <p class="modify-user-name">' + e + '</p>   <p><input type="text" value="" placeholder="快输入一个更酷炫的昵称吧！" class="modify-user-text" /></p>   <p class="modify-user-btns">       <a href="javascript:;" class="modify-user-cancel">取消</a>       <a href="javascript:;" class="modify-user-submit">确定</a>   </p></div>';
                return t = _.template(t)(e)
            },
            modifyUserName: function() {
                $(".modify-user-submit").on("tap", function() {
                    var e = $.trim($(".modify-user-text").val());
                    return /^[\dA-Za-z()]{1,20}$/.test(e.replace(/[\u4E00-\u9FA5（）]/g, "aa")) ? void $.ajax({
                        url: "thirdapp/forum/submitUserNickname",
                        type: "POST",
                        dataType: "json",
                        data: {
                            userNickname: e
                        }
                    }).then(function(e) {
                        $(".modify-user-overlay, .modify-user-dialog").remove(),
                        document.body.scrollTop = 0,
                        Tribe.util.tips(e.success ? "修改成功" : "修改失败")
                    }) : (Tribe.util.tips("请输入中英文、数字或圆括号，长度小于20个字母或10个汉字", 260),
                    !1)
                }),
                $(".modify-user-cancel").on("click", function() {
                    $(".modify-user-overlay, .modify-user-dialog").remove(),
                    document.body.scrollTop = 0
                })
            }
        };
        t.exports = n.init
    }
    , {
        "./getUserInfo": 5
    }],
    3: [function(e, t) {
        var i = {
            init: function(e) {
                e && e.networkId && (this._networkId = e.networkId)
            },
            isShare: function(e, t) {
                var i = Tribe.util.cookie("pcode") || null
                  , n = Tribe.util.cookie("pinvite") || null ;
                return this.publicArr.isDetail = t,
                null != i && null != n || !t ? (this._userId = n,
                void (null != i && null != n ? this.getPublic(e, !0) : this.getPublic(e, !1))) : void this.getPublic(e)
            },
            _userId: null ,
            _networkId: null ,
            imgSrc: "",
            publicArr: {},
            _codeWrap: null ,
            saveCareNum: function() {},
            getPublic: function(e, t) {
                var i = this;
                $.ajax({
                    type: "Get",
                    url: "thirdapp/forum/getPublic",
                    async: !1,
                    dataType: "json"
                }).done(function(n) {
                    if (n && (i.publicArr.wechatPublicNumber = n.wechatPublicNumber,
                    n.userName && "" != n.userName ? (i.publicArr.userName = n.userName,
                    n.isAuthorize = i.publicArr.isAuthorize = !0,
                    n.isCodeImg = i.publicArr.isCodeImg = !1) : n.customQRCodeUrl && "" != n.customQRCodeUrl ? (n.isAuthorize = i.publicArr.isAuthorize = !1,
                    n.isCodeImg = i.publicArr.isCodeImg = !0,
                    i.publicArr.customQRCodeUrl = n.customQRCodeUrl) : (n.isAuthorize = i.publicArr.isAuthorize = !1,
                    n.isCodeImg = i.publicArr.isCodeImg = !1),
                    e && "function" == typeof e && e(i.publicArr),
                    Tribe.util.cookie("pcode", null ),
                    Tribe.util.cookie("pinvite", null ),
                    t)) {
                        if (!(n.isAuthorize || n.isCodeImg || "" != n.guideFollowLink && null != n.guideFollowLink))
                            return;
                        if ((n.isAuthorize || n.isCodeImg) && i.publicArr.isDetail)
                            return;
                        ("" == n.userName || null == n.userName || "" == n.headImgUrl || null == n.headImgUrl) && (i.getSheQuInfo(),
                        n.headImgUrl = "/space/c/photo/load?id=" + i.publicArr.headImgUrl,
                        "" == n.wechatPublicNumber || null == n.wechatPublicNumber ? n.wechatPublicNumber = i.publicArr.nickName : i.publicArr.nickName = n.wechatPublicNumber);
                        var a = $(".public-wrapper");
                        a.length > 0 ? a.show() : ($("body").append(i.publicTpl(n)),
                        $(".delBtn").on("click", function() {
                            i.delFun($(".public-wrapper"))
                        }),
                        $(".showCodeBtn").on("click", function() {
                            i.showCodeFun()
                        }),
                        $(".careLinkBtn").on("click", function() {
                            var e = $(this).attr("data-href");
                            window.location.href = e
                        }))
                    }
                })
            },
            publicTpl: function(e) {
                var t = this
                  , i = $(window).width() - 220;
                e._nameWidth = i;
                var n = $(".public-wrapper");
                if (0 == n.length) {
                    var a = "0";
                    0 != $(".foot").length && (a = $(".foot").height() + "px");
                    var o = '<div class="public-wrapper" style="bottom:1rem;" data-userid=' + t._userId + '><div class="mask"></div><div class="care-msg"><img class="care-img" src="<%=headImgUrl%>"/><p class="p-msg"><% var name = wechatPublicNumber?wechatPublicNumber.substring(0,9):"";if(wechatPublicNumber && wechatPublicNumber.length>4) name = name + "..."%><span class="ellipsis" style="max-width:<%=_nameWidth%>px;"><%=name%></span></p><%if(isAuthorize || isCodeImg){%><a class="careBtn showCodeBtn"></a><%}else{%><a class="careBtn careLinkBtn" data-href="<%=guideFollowLink%>" target="_blank"></a><%}%><a class="delBtn upload_delete"></a></div></div>';
                    return o = _.template(o)(e)
                }
            },
            codeTpl: function(e) {
                e._top = ($(window).height() - 300) / 2 + "px",
                e._right = ($(window).width() - 230) / 2 + "px";
                var t = '<div class="code-wrapper" style="top:<%=_top%>;"><a class="codeDelBtn">×</a><div class="codeInfo">   <p class="">长按关注</p><%if(isAuthorize){%>   <img src="http://open.weixin.qq.com/qr/code/?username=<%=userName%>"/><%}else if(!isAuthorize && isCodeImg){%>   <img src="<%=customQRCodeUrl%>"/><%}%>   <p class="ellipsis publicName"><%=wechatPublicNumber?wechatPublicNumber:"关注公众号才能回复、点赞"%></p></div></div>';
                return _.template(t)(e)
            },
            delFun: function(e) {
                e && e.hide()
            },
            showCodeFun: function() {
                var e = this;
                if (this._codeWrap) {
                    var t = this.publicArr.nickName || this.publicArr.wechatPublicNumber;
                    $(".publicName", this._codeWrap).text(t),
                    this._codeWrap.show()
                } else
                    $("body").append(this.codeTpl(this.publicArr)),
                    this._codeWrap = $(".code-wrapper"),
                    $(".codeDelBtn").on("click", function() {
                        e.delFun(e._codeWrap)
                    })
            },
            getSheQuInfo: function() {
                var e = this;
                $.ajax({
                    async: !1,
                    url: "thirdapp/forum/defaultTribe",
                    type: "get",
                    data: {
                        networkId: e._networkId || Tribe.networkId
                    },
                    dataType: "json"
                }).done(function(t) {
                    return t && t.networkVO && t.networkVO.logoId ? (e.publicArr.headImgUrl = t.networkVO.logoId,
                    void (e.publicArr.nickName = t.networkVO.name)) : void console.log("获取本社区公众号错误")
                })
            },
            isShowModule: function(e) {
                var t = !0
                  , i = this;
                $.ajax({
                    url: "thirdapp/forum/showModule",
                    type: "GET",
                    dataType: "json"
                }).done(function(n) {
                    if (n) {
                        if (n.onlyFollowerCanReply && i.publicArr.isAuthorize)
                            return void i.isCarePublic(e);
                        t = !0
                    } else
                        t = !1;
                    e && "function" == typeof e && e(t)
                })
            },
            isCarePublic: function(e) {
                var t = !0;
                $.ajax({
                    url: "thirdapp/forum/isFocusPublic",
                    type: "GET",
                    dataType: "json"
                }).done(function(i) {
                    t = i && i.message.subscribe ? !0 : !1,
                    e && "function" == typeof e && e(t)
                })
            },
            showPublicWindow: function(e) {
                var t = this;
                this._codeWrap ? this._codeWrap.show() : ($("body").append(this.codeTpl(this.publicArr)),
                this._codeWrap = $(".code-wrapper"),
                $(".codeDelBtn").on("click", function() {
                    t.delFun(t._codeWrap)
                }));
                var i = e ? e : "关注公众号才能回帖、点赞";
                $("p:first", this._codeWrap).text(i)
            }
        };
        t.exports = i
    }
    , {}],
    4: [function(e, t) {
        var i = {
            init: function(e) {
                return this.isError = e.isError,
                "50002" == this.isError ? (this.fhTpl(),
                !0) : !1
            },
            fhTpl: function() {
                var e = $(window).height()
                  , t = '<div class="fh-wrapper" ><div class="fh-box"><img src="thirdapp/forum/img/fhbg.png"/><p>您的帐号在此社区有违规行为,<br>暂时被管理员封停<br/></p><a class="firstBut">返回</a></div></div>';
                $("body").append(t),
                $(".firstBut").click(function() {
                    wx.closeWindow()
                }),
                $("body").css("height", e + "px"),
                document.body.style.overflow = "hidden"
            }
        };
        t.exports = i
    }
    , {}],
    5: [function(e, t) {
        "use strict";
        var i = function() {
            var e = $.Deferred();
            return $.ajax({
                url: "thirdapp/forum/getUser",
                dataType: "json"
            }).then(function(t) {
                t && t.success ? e.resolve(t) : e.reject(t && t.message.error_description || "获取用户信息失败")
            }, function(t) {
                e.reject(t || "获取用户信息失败")
            }),
            e.promise()
        }
        ;
        t.exports = i
    }
    , {}],
    6: [function(e, t) {
        function i(e) {
            if (void 0 != typeof e) {
                var t = e;
                $(t).parents(".upload_append_list").remove();
                for (var i = $("#sendMsg").attr("data-fileids").split(","), n = 0; n < i.length; n++)
                    $(t).attr("data-fileid") == i[n] && i.splice(n, 1);
                $("#sendMsg").attr("data-fileids", i.toString()),
                0 === i.length && ($("#sendMsg").attr("data-fileids", ""),
                $("#add").hide()),
                $(".upload_append_list").length < 9 && ($("#add").css("display", "inline-block"),
                $(".fileImage").removeAttr("disabled")),
                $(".upload_append_list").length < 1 && "" == $("#editor").val() && $("#sendMsg").addClass("bg-gray")
            }
        }
        var n = e("../lib/plugin/uploader")
          , a = {
            url: "/microblog/filesvr/upload",
            maxNum: 9,
            fileInput: $(".fileImage"),
            filter: function(e) {
                var t = []
                  , i = e.length > this.maxNum ? this.maxNum : e.length
                  , n = document.querySelector(".upload-box-container").getElementsByClassName("upload_append_list").length;
                n + i > 9 && (i = 9 - n,
                Tribe.util.tips("最多只能显示9张图片", 2e3));
                for (var a = 0; i > a; ++a) {
                    var o = e[a];
                    "ios" == Tribe.util.getOS() ? "JPG|JPEG|PNG|GIF|".indexOf(o.name.substring(o.name.lastIndexOf(".") + 1).toUpperCase() + "|") > -1 ? o.size >= 1024e6 ? Tribe.util.tips('图片"' + o.name + '"文件过大，应小于10M', 2e3) : t.push(o) : Tribe.util.tips('文件"' + o.name + '"不是图片。', 2e3) : o.size >= 1024e6 ? Tribe.util.tips('图片"' + o.name + '"文件过大，应小于10M', 2e3) : t.push(o)
                }
                return t
            },
            onBeforeSend: function(e) {
                var t = "";
                t = t + '<div data-id="' + e.index + '" class="upload_append_list"><span class="upload_delete" title="删除" data-index="' + e.index + '"></span><p><img id="uploadImage_' + e.index + '" src="" class="upload_image" /></p><div class="progress" id="uploadProgress_' + e.index + '"><div class="progress-bar"><span class="current-progress"></span></div></div></div>';
                var i = $("#add");
                i.before(t)
            },
            onSelect: function(e) {
                var t = function() {
                    var t = new FileReader;
                    t.readAsDataURL(e),
                    t.onload = function() {
                        var e = $("#add")
                          , t = document.querySelector(".upload-box-container")
                          , i = t.parentNode.offsetWidth
                          , n = e[0].offsetLeft
                          , a = e[0].offsetWidth
                          , o = t.getElementsByClassName("upload_append_list").length;
                        n + a > i && 9 > o && (t.style.left = -e[0].offsetLeft + i - a + "px")
                    }
                }
                ;
                t(),
                $("#add").css("display", "inline-block"),
                $(".fileImage").val("")
            },
            onProgress: function(e, t, n) {
                var a = $("#uploadProgress_" + e.index)
                  , o = (t / n * 100).toFixed(2)
                  , r = a.width();
                a.show().find(".current-progress").css("width", o / 100 * r + "px"),
                $('.upload_delete[data-index="' + e.index + '"]').on("click", function() {
                    i(this)
                })
            },
            onSuccess: function(e, t) {
                var i = $("#sendMsg").attr("data-fileids");
                $("#sendMsg").attr("data-fileids", "" == i ? t : i += "," + t).removeClass("bg-gray"),
                (9 === $(".upload_append_list").length || $(".upload_append_list").length > 9) && ($("#add").hide(),
                $(".fileImage").attr("disabled", "disabled")),
                $('.upload_delete[data-index="' + e.index + '"]').attr("data-fileid", t);
                var n = $("#uploadProgress_" + e.index);
                n.hide(),
                $("#uploadImage_" + e.index).attr("src", "/microblog/filesvr/" + t)
            },
            onFailure: function(e) {
                Tribe.util.tips("上传失败", 2e3),
                $("#uploadImage_" + e.index).closest(".upload_append_list").remove()
            },
            onComplete: function() {
                $(".fileImage").val("")
            }
        };
        t.exports = $.extend({}, n, a)
    }
    , {
        "../lib/plugin/uploader": 14
    }],
    7: [function(e, t) {
        !function(e, t) {
            function i(t, i) {
                if (t) {
                    i = i || {},
                    this.elem = t,
                    this.maxWidth = i.maxWidth || document.body.clientWidth;
                    var n = {
                        x: null ,
                        y: null ,
                        left: 0,
                        time: null
                    }
                      , a = Object.create(n)
                      , o = !1;
                    this.init = function() {
                        0 != this.maxWidth && this.elem.addEventListener("touchstart", this.startHandler.bind(this), !1)
                    }
                    ,
                    this.startHandler = function(e) {
                        var t = e.touches[0];
                        n.x = t.pageX,
                        n.y = t.pageY;
                        var i = parseInt(window.getComputedStyle(this.elem).left, 10);
                        n.left = i,
                        n.time = +new Date,
                        o = !1,
                        this.isMovable() && (this.elem.addEventListener("touchmove", this.moveHandler.bind(this), !1),
                        this.elem.addEventListener("touchend", this.endHandler.bind(this), !1))
                    }
                    ,
                    this.moveHandler = function(e) {
                        if (!(e.touches.length > 1 || e.scale && 1 !== e.scale)) {
                            var t = e.touches[0];
                            if (a.x = t.pageX - n.x,
                            a.y = t.pageY - n.y,
                            Math.abs(a.y) > 15 && Math.abs(a.x) < 15 || Math.abs(a.y) > 10 && a.y < 0 && Math.abs(a.x) < 10)
                                return void r();
                            e.preventDefault();
                            var i = n.left + a.x;
                            this.elem.style.left = i + "px",
                            a.left = i
                        }
                    }
                    ,
                    this.transitionEndHandler = function() {
                        this.elem.classList.remove("slide-animate"),
                        this.elem.removeEventListener("transitionend", this.transitionEndHandler)
                    }
                    ,
                    this.endHandler = function() {
                        if (!o) {
                            var t = +new Date - n.time
                              , i = parseInt(this.elem.firstElementChild.offsetWidth, 10);
                            if (t > 100) {
                                var s;
                                if (a.x > 15)
                                    s = this.getCurrentIndex(-i / 2),
                                    s > -1 && 0 === s && e(this.elem).animate({
                                        left: 0
                                    }, 200);
                                else if (a.x < -15) {
                                    var l = this.elem.lastElementChild;
                                    l = "none" === l.style.display ? l.previousElementSibling : l;
                                    var c = l.offsetLeft + l.offsetWidth;
                                    a.left + c < this.maxWidth && e(this.elem).animate({
                                        left: -(c - this.maxWidth) + "px"
                                    }, 200)
                                }
                            }
                            r(),
                            this.elem.addEventListener("transitionend", this.transitionEndHandler.bind(this), !1),
                            o = !0
                        }
                    }
                    ,
                    this.isMovable = function() {
                        var e = this.elem.lastElementChild;
                        if (e) {
                            e = "none" === e.style.display ? e.previousElementSibling : e;
                            var t = e.offsetLeft + e.offsetWidth;
                            if (t > this.maxWidth)
                                return !0
                        }
                        return !1
                    }
                    ,
                    this.getCurrentIndex = function(e) {
                        e = e || 0;
                        for (var t = this.elem.children, i = 0, o = t.length; o > i; ++i) {
                            var r = t[i]
                              , s = n.left + a.x
                              , l = r.offsetLeft
                              , c = l + s + e;
                            if (c >= 0 || r.nextElementSibling && r.nextElementSibling.offsetLeft + s + e >= 0)
                                return i
                        }
                        return -1
                    }
                    ;
                    var r = function() {
                        this.elem.removeEventListener("touchmove", this.moveHandler),
                        this.elem.removeEventListener("touchend", this.endHandler)
                    }
                    .bind(this)
                }
            }
            t.exports = i
        }($, t)
    }
    , {}],
    8: [function(e, t) {
        "use strict";
        function i(e, t) {
            if (!(e instanceof t))
                throw new TypeError("Cannot call a class as a function")
        }
        var n = function() {
            function e(e, t) {
                for (var i = 0; i < t.length; i++) {
                    var n = t[i];
                    n.enumerable = n.enumerable || !1,
                    n.configurable = !0,
                    "value"in n && (n.writable = !0),
                    Object.defineProperty(e, n.key, n)
                }
            }
            return function(t, i, n) {
                return i && e(t.prototype, i),
                n && e(t, n),
                t
            }
        }()
          , a = e("../lib/public/validation")
          , o = e("fastclick")
          , r = function() {
            function e() {
                i(this, e)
            }
            return n(e, [{
                key: "init",
                value: function() {
                    var e = arguments.length <= 0 || void 0 === arguments[0] ? {} : arguments[0];
                    this.option = e,
                    this.validMobile = !1,
                    this.countMill = 60,
                    this.continueCB = this.option.continueCB,
                    this.cancelCB = this.option.cancelCB,
                    this.isTipShow = this.option.isTipShow ? !0 : !1,
                    this.statue = {
                        1000: "无效业务代码",
                        1001: "无效主叫号码",
                        1002: "无效被叫号码",
                        1003: "呼叫失败",
                        1004: "欠费"
                    }
                }
            }, {
                key: "getUserInfo",
                value: function() {
                    return $.ajax({
                        type: "GET",
                        url: "thirdapp/forum/getUser",
                        dataType: "json"
                    })
                }
            }, {
                key: "callNumber",
                value: function(e) {
                    var t = this
                      , i = this
                      , n = e || "";
                    return n == Tribe.userId ? void Tribe.util.tips("这是你自己发的帖子哦") : void $.ajax({
                        url: "thirdapp/forum/callNum",
                        type: "POST",
                        dataType: "json",
                        data: {
                            toUserId: n
                        }
                    }).then(function(e) {
                        if (!e || !e.success)
                            return void Tribe.util.tips("拨打电话失败");
                        var n = e.message;
                        if (n.success)
                            n.success && i.callTpl();
                        else {
                            if (!n.errorCode)
                                return void Tribe.util.tips("" + n.errormsg || "拨打电话失败");
                            switch (n.errorCode) {
                            case "1004":
                                ;Tribe.util.confirm(obj);
                                break;
                            default:
                                Tribe.util.tips(t.statue[n.errorCode])
                            }
                        }
                    })
                }
            }, {
                key: "callTpl",
                value: function() {
                    var e = '<div class="j-callBack-wrap freeCallWrap">\n            <div class="abs-bg"></div>\n\n            <div class="bounceIn tplLayerCard mod05 tplIng-card">\n                <a class="j-cB-closeBtn close">×</a>\n                <div class="tpling-con">\n                <h2>请接听微信社区来电</h2>\n                <div class="tpl">\n                    <p>通话过程不消耗流量</p>\n                </div>\n                <p class="tplImg"></p>\n                <p style="text-align: left;">*部分用户可能因手机套餐类型，由运营商收取接听或漫游费用</p>\n                </div>\n            </div>\n        </div>';
                    $("body").append(e),
                    $(".j-cB-closeBtn", ".j-callBack-wrap").on("click", function() {
                        $(".j-callBack-wrap").remove()
                    })
                }
            }, {
                key: "bindMobileTpl",
                value: function() {
                    var e = this
                      , t = arguments.length <= 0 || void 0 === arguments[0] ? {} : arguments[0];
                    (t.continueCB || t.cancelCB) && (this.continueCB = t.continueCB,
                    this.cancelCB = t.cancelCB,
                    this.isTipShow = t.isTipShow ? !0 : !1);
                    var i = ' <div class="j-mobile-wrap freeCallWrap">\n                    <div class="abs-bg"></div>\n                    <div class="bounceIn tplLayerCard mod05">\n                    <div class="layer-hd-bg">\n                        <a class="j-closeBtn close">×</a>\n                        <p class="tips-text">本社区已开通免费电话功能，请绑定手机号码立即体验！</p>\n                    </div>\n                    <div class="telInfo">\n                        <input type="text" placeholder="手机号码" class="j-mobile" />\n                    <div class="infoPart">\n                        <input type="text" placeholder="验证码" class="j-codes imageCode" />\n                        <button class="j-codesBtn j-curr getCode">获取验证码</button>\n                    </div>\n                        <button class="j-bindBtn j-curr btn">确认</button>\n                        <a class="blue-text" href="http://www.xingdongliu.com/world/view?key=MDAwMDAwMDAwMDRkNzY2MWFkZTA2">什么是免费电话</a>\n                        <a class="j-tipsBtn ' + (this.isTipShow ? "" : "none") + '">不再提示</a>\n                    </div>\n                </div>\n                </div>';
                    $("body").append(i),
                    o($(".j-mobile-wrap")[0]),
                    $(".j-mobile-wrap").on("click", ".j-codesBtn", function(t) {
                        return e.sendNoteCode(t)
                    }),
                    $(".j-mobile-wrap").on("click", ".j-bindBtn", function() {
                        return e.checkNote()
                    }),
                    $(".j-mobile-wrap").on("click", ".j-tipsBtn", function() {
                        return e.setTip()
                    }),
                    $(".j-mobile-wrap").on("click", ".j-closeBtn", function(t) {
                        e.cancelBind(t)
                    })
                }
            }, {
                key: "sendNoteCode",
                value: function(e) {
                    var t = this;
                    e && (e.preventDefault(),
                    e.stopImmediatePropagation());
                    var i = $(".j-codesBtn");
                    if (i.hasClass("j-curr")) {
                        var n = this;
                        if (this.validateValue()) {
                            i.removeClass("j-curr").addClass("bg-gray").text("60s"),
                            this.countvariable = setInterval(function() {
                                return t.countDown()
                            }, 1e3);
                            var a = $(".j-mobile").val();
                            $.ajax({
                                type: "POST",
                                url: "thirdapp/forum/getOnlyNoteCode",
                                data: {
                                    mobile: a
                                },
                                dataType: "json"
                            }).then(function(e) {
                                return e && e.success ? void 0 : (clearInterval(n.countvariable),
                                i.addClass("j-curr").removeClass("bg-gray").text("获取验证码"),
                                void Tribe.util.tips("获取验证码失败，请重新获取"))
                            })
                        }
                    }
                }
            }, {
                key: "countDown",
                value: function() {
                    var e = $(".j-codesBtn");
                    this.countMill--,
                    e.text(this.countMill + "s"),
                    (0 == this.countMill || this.countMill < 0) && (clearInterval(this.countvariable),
                    e.addClass("j-curr").removeClass("bg-gray").text("获取验证码"),
                    this.countMill = 60)
                }
            }, {
                key: "validateValue",
                value: function(e) {
                    var t = $(".j-mobile").val();
                    if ("" == t || null == t)
                        return Tribe.util.tips("请输入手机号码"),
                        !1;
                    if (!a.isTel(t))
                        return Tribe.util.tips("请输入正确的手机号码"),
                        !1;
                    var i = $(".j-codes").val();
                    return "" != i && null != i || "bindBtn" != e ? !0 : (Tribe.util.tips("请输入验证码"),
                    !1)
                }
            }, {
                key: "checkNote",
                value: function() {
                    var e = this
                      , t = $(".j-codes")
                      , i = $(".j-bindBtn")
                      , n = $(".j-mobile").val()
                      , a = this.validateValue("bindBtn");
                    a && i.hasClass("j-curr") && (i.removeClass("j-curr"),
                    $.ajax({
                        type: "post",
                        url: "thirdapp/forum/checkVCode",
                        data: {
                            mobile: n,
                            vcode: t.val()
                        },
                        dataType: "json"
                    }).then(function(t) {
                        if (!t || !t.success)
                            return Tribe.util.tips("短信验证码错误,请重填！"),
                            void i.addClass("j-curr");
                        e.checkNum(n).then(function(t) {
                            t && "ACTIVITED" == t.message.status ? (0 != $(".j-mobile-wrap").length && $(".j-mobile-wrap").remove(),
                            e.reBindTpl(n)) : t && !t.success ? Tribe.util.tips(t.message.error_description) : e.bindNumber(n)
                        })
                    }))
                }
            }, {
                key: "checkNum",
                value: function(e) {
                    var t = e;
                    return $.ajax({
                        type: "GET",
                        url: "thirdapp/forum/checkMobile",
                        data: {
                            accountName: t
                        },
                        dataType: "json"
                    })
                }
            }, {
                key: "reBindTpl",
                value: function(e) {
                    var t = this
                      , i = {
                        title: "此号码已被使用",
                        content: "绑定后将保留" + e + "的发帖和积分等记录，原账号信息将被清空。",
                        continueBtnText: "重新绑定",
                        cancelBtnText: "取消"
                    };
                    this.warningTpl(i),
                    $(".j-warningTip").on("click", ".continueBtn", function() {
                        $(".j-warningTip").remove(),
                        t.bindNumber(e)
                    }),
                    $(".j-warningTip").on("click", ".cancelBtn", function(e) {
                        $(".j-bindBtn").addClass("j-curr"),
                        t.cancelBind(e)
                    })
                }
            }, {
                key: "cancelBind",
                value: function(e) {
                    e.stopImmediatePropagation(),
                    0 != $(".j-mobile-wrap").length && $(".j-mobile-wrap").remove(),
                    0 != $(".j-warningTip").length && $(".j-warningTip").remove(),
                    "function" == typeof this.cancelCB && this.cancelCB()
                }
            }, {
                key: "bindNumber",
                value: function(e) {
                    var t = this
                      , i = this
                      , n = $(".j-bindBtn")
                      , a = $(".j-codesBtn");
                    $.ajax({
                        type: "post",
                        url: "thirdapp/forum/bindMobile",
                        data: {
                            userId: Tribe.userId,
                            mobile: e
                        },
                        dataType: "json",
                        error: function() {
                            Tribe.util.tips("绑定手机号码失败，请重试！"),
                            clearInterval(i.countvariable),
                            a.addClass("j-curr").text("获取验证码"),
                            n.addClass("j-curr")
                        }
                    }).then(function(e) {
                        return clearInterval(i.countvariable),
                        t.countMill = 60,
                        a.addClass("j-curr").text("获取验证码"),
                        n.addClass("j-curr"),
                        e && e.success ? (i.validMobile = !0,
                        Tribe.util.tips("绑定手机号码成功！"),
                        0 != $(".j-mobile-wrap").length && $(".j-mobile-wrap").remove(),
                        void ("function" == typeof i.continueCB && i.continueCB())) : void Tribe.util.tips("绑定手机号码失败，请重试！")
                    })
                }
            }, {
                key: "checkTip",
                value: function() {
                    return $.ajax({
                        type: "GET",
                        url: "thirdapp/forum/checkTips",
                        data: {
                            "function": "freeCall"
                        },
                        dataType: "json"
                    })
                }
            }, {
                key: "setTip",
                value: function() {
                    var e = this;
                    $.ajax({
                        type: "POST",
                        url: "thirdapp/forum/setTips",
                        data: {
                            "function": "freeCall"
                        },
                        dataType: "json"
                    }).then(function(t) {
                        return t && t.success ? void ("function" == typeof e.continueCB && e.continueCB()) : void Tribe.util.tips("设置不再提示失败")
                    })
                }
            }, {
                key: "warningTip",
                value: function() {
                    var e = {
                        content: "当前用户已开启免打扰模式，请稍后再试。",
                        cancelBtnText: "我知道了",
                        isDisplay: "none"
                    };
                    this.warningTpl(e),
                    $(".j-warningTip").on("click", ".cancelBtn", function() {
                        $(".j-warningTip").remove()
                    })
                }
            }, {
                key: "warningTpl",
                value: function() {
                    var e = arguments.length <= 0 || void 0 === arguments[0] ? {} : arguments[0]
                      , t = '<div class="j-warningTip">\n            <div class="abs-bg"></div>\n            <div class="bounceIn tplLayerCard">\n            <div class="mainInfo">\n                <h3>' + (e.title || "") + '</h3>\n                <p class="about-ad-info-card">' + (e.content || "") + '</p>\n            </div>\n            <div class="setBtn layout-box">\n                <a class="cancelBtn box-col">' + (e.cancelBtnText || "") + '</a>\n                <i class="line-gradients"></i>\n                <a class="continueBtn box-col ' + e.isDisplay + '" >' + (e.continueBtnText || "") + "</a>\n            </div>\n            </div>\n        </div>";
                    $("body").append(t)
                }
            }, {
                key: "getNoDisturb",
                value: function(e) {
                    return $.ajax({
                        type: "GET",
                        url: "thirdapp/forum/checkUserCallStatus",
                        data: {
                            userId: e
                        },
                        dataType: "json"
                    })
                }
            }, {
                key: "setNoDisturb",
                value: function(e) {
                    return $.ajax({
                        type: "POST",
                        url: "thirdapp/forum/setUserCallStatus",
                        data: {
                            isCloseFreeCall: e
                        },
                        dataType: "json"
                    })
                }
            }]),
            e
        }();
        t.exports = new r
    }
    , {
        "../lib/public/validation": 16,
        fastclick: 18
    }],
    9: [function(e, t) {
        var i = {
            init: function() {
                this.readyFun();
                var e = this;
                $(".site-btn").on("click", function() {
                    e.optionSite(this)
                }),
                this.isSite = !1
            },
            readyFun: function() {
                var e = this;
                e.getLocation(e);
            },
            getLocation: function(e) {
                var t=e;
                navigator.geolocation.getCurrentPosition(function(position){
                    var lat = position.coords.latitude;
                    var lng = position.coords.longitude;
                    t.getName(lat, lng),
                    t.isSite = !1;
                });
            },
            getName: function(e, t) {
                var gc = new BMap.Geocoder();
                gc.getLocation(new BMap.Point(t,e), function(rs){
                    var addComp = rs.addressComponents;
                    $(".select-site").removeClass("show"),
                    $(".select-site").addClass("show-curr"),
                    $(".site-name").attr("data-latitude", e),
                    $(".site-name").attr("data-longitude", t),
                    $(".site-name").text(addComp.city+" "+addComp.street)
                });
            },
            optionSite: function() {
                var e = $(".site-btn").text();
                "点击开启定位" != e || this.isSite ? ($(".select-site").removeClass("show-curr"),
                $(".select-site").addClass("show"),
                $(".site-name").attr("data-latitude", "-1"),
                $(".site-name").attr("data-longitude", "-1"),
                $(".site-name").text("点击开启定位")) : (this.isSite = !1,
                this.getLocation(this),
                $(".site-name").text("正在定位中..."))
            }
        };
        t.exports = i
    }
    , {}],
    10: [function(e, t, i) {
        "use strict";
        function n(e, t) {
            if (!(e instanceof t))
                throw new TypeError("Cannot call a class as a function")
        }
        Object.defineProperty(i, "__esModule", {
            value: !0
        });
        {
            var a = function() {
                function e(e, t) {
                    for (var i = 0; i < t.length; i++) {
                        var n = t[i];
                        n.enumerable = n.enumerable || !1,
                        n.configurable = !0,
                        "value"in n && (n.writable = !0),
                        Object.defineProperty(e, n.key, n)
                    }
                }
                return function(t, i, n) {
                    return i && e(t.prototype, i),
                    n && e(t, n),
                    t
                }
            }();
            i.Topic = function() {
                function e() {
                    var t = arguments.length <= 0 || void 0 === arguments[0] ? {} : arguments[0];
                    n(this, e),
                    this.getHotTopicCallback = t.getHotTopicCallback || function() {}
                    ,
                    this.root = t.root
                }
                return a(e, [{
                    key: "init",
                    value: function() {
                        var e = '<div class="topic-item-mod"></div>';
                        $(".topic-item-mod").length ? $(".topic-item-mod").show() : ($(e).appendTo(this.root),
                        this.getHotTopic(),
                        this.onTopicClick())
                    }
                }, {
                    key: "getHotTopic",
                    value: function() {
                        var e = this;
                        $.ajax({
                            type: "GET",
                            url: "",
                            data: {},
                            dataType: "json"
                        }).done(function(t) {
                            var i = $(".topic-item-mod");
                            return t && 0 == t.message.length ? (i.hide(),
                            $(".topic-btn-item").parent().hide(),
                            void $(".msg-btn").click()) : (i.html(e.topicTpl(t)),
                            void e.getHotTopicCallback())
                        })
                    }
                }, {
                    key: "onTopicClick",
                    value: function() {
                        $(".topic-item-mod").on("click", ".topic-hot-item", function() {
                            $(this).toggleClass("curr"),
                            $(this).siblings("a").removeClass("curr")
                        })
                    }
                }, {
                    key: "topicTpl",
                    value: function(e) {
                        var t = new RegExp(/\//g)
                          , i = "true" === $("#sendMsg").attr("data-isAdmin") ? !0 : !1
                          , n = '<%if(message.length == 0){}else{%><%_.each(message,function(item,index){if(index > 15) return;%>   <a class="topic-hot-item ellipsis" href="javascript:;" data-sectionId="<%=item.id%>"><%=item.sectionName%></a><%});%><%}%>';
                        return i || (n = '<%if(message.length == 0){}else{%><%_.each(message,function(item,index){if(index > 15) return;%><%if(!item.onlyAvailableForAdmin){%>   <a class="topic-hot-item ellipsis" href="javascript:;" data-sectionId="<%=item.id%>"><%=item.sectionName%></a><%}%><%});%><%}%>'),
                        e.reg = t,
                        n = _.template(n)(e)
                    }
                }], [{
                    key: "getInstance",
                    value: function() {
                        for (var e = arguments.length, t = Array(e), i = 0; e > i; i++)
                            t[i] = arguments[i];
                        this.instance || (this.instance = new (Function.prototype.bind.apply(this, [null ].concat(t)))),
                        this.instance.init()
                    }
                }]),
                e
            }()
        }
    }
    , {}],
    11: [function(e, t) {
        var i = {
            boxWrapper: null ,
            videoWrapper: null ,
            videoData: null ,
            videoNum: 1,
            cb: null ,
            init: function(e, t) {
                var i = this;
                i.cb = t,
                this.boxWrapper = e;
                var n = $(".upload-video");
                n && 0 != n.length ? n.show() : (this.boxWrapper.append(this.loadTpl),
                this.videoWrapper = $(".upload-video"),
                $(".upload-video-btn", this.videoWrapper).bind("click", function() {
                    i.requestVideo || (i.requestVideo = !0,
                    i.videoNum = 0,
                    i.analyzeUrl(this))
                }))
            },
            loadTpl: '<div class="upload-video"><div class="load-video"><div class="video-linkadd">   <input placeholder="粘贴视频地址" type="url" class="video-addr"/>   <button class="upload-video-btn">上传</button></div>   <p class="video-txt">将视频播放地址(电脑端和手机端)复制粘贴到上方，支持腾讯视频、优酷、土豆。</p></div></div>',
            showTpl: function(e) {
                var t = '<div class="show-video none" videoId="<%=vid%>">     <a class="del-video-btn upload_delete" href="#"></a>     <iframe class="video-iframe" src="<%=embedVideoURL%>" frameborder="0" allowfullscreen >     您的浏览器不支持视频播放</iframe>    <div class="video-info-mod"><span class="ellipsis video-info"><%=title%></span><span class="video-ly"><%=videoTypeName%></span></div></div>';
                switch (e.embedVideoURL = 1 == e.embedVideoURL.split("?").length ? e.embedVideoURL + "?auto=0&tiny=0" : e.embedVideoURL + "&auto=0&tiny=0",
                e.vid = e.keys ? e.keys.vid : "",
                e.videoType) {
                case "TECENT":
                    e.videoTypeName = "腾讯视频";
                    break;
                case "YOUKU":
                    e.videoTypeName = "优酷视频";
                    break;
                case "TUDOU":
                    e.videoTypeName = "土豆视频";
                    break;
                default:
                    e.videoTypeName = ""
                }
                return _.template(t)(e)
            },
            requestVideo: !1,
            tips: function(e, t) {
                var i = ($(window).width() - 145) / 2 + "px"
                  , n = {
                    str: e
                }
                  , a = $(".videoTips");
                if (0 == a.length) {
                    var o = '<div class="videoTips tips" style="left:' + i + '">' + e + "</div>";
                    $("body").append(_.template(o)(n))
                } else
                    a.text(n.str);
                $(".videoTips").css("visibility", "visible"),
                t && setTimeout(function() {
                    $(".videoTips").css("visibility", "hidden")
                }, t)
            },
            analyzeUrl: function() {
                var e = this
                  , t = $(".video-addr").val();
                return t.match(this.urlRex) ? (e.tips("视频正在上传中,请稍候..."),
                void $.ajax({
                    url: "thirdapp/forum/analyzeUrl",
                    type: "POST",
                    data: {
                        url: t
                    },
                    dataType: "json"
                }).done(function(t) {
                    t.success ? (e.videoWrapper.append(e.showTpl(t.message)),
                    e.videoData = t.message,
                    $(".load-video").removeClass("page-from-left"),
                    $(".load-video").addClass("none"),
                    $(".show-video").addClass("page-from-left"),
                    $(".del-video-btn", e.videoWrapper).bind("click", e.delVideo),
                    e.requestVideo = !1,
                    e.tips("视频上传成功", 3e3),
                    "function" == typeof e.cb && e.cb(e.videoData)) : (e.videoNum++,
                    e.videoNum <= 3 ? e.analyzeUrl() : ($(".videoTips").css("visibility", "hidden"),
                    "30017" == t.message.error_code ? Tribe.util.tips("该地址暂时不支持获取视频分享内容,请更换地址", 2e3) : Tribe.util.tips("上传失败，请检查网络或重新上传", 2e3),
                    e.videoNum = 1,
                    e.requestVideo = !1))
                })) : void (e.requestVideo = !1)
            },
            urlRex: /(http|https|ftp|Http)\:\/\/[\.\-\_\/a-zA-Z0-9\~\?\%\#\=\@\:\&\;\*\+\!\(\)\{\}]+\b[\?\#\/\*\=]*/g,
            delVideo: function(e) {
                $(this).parent().remove(),
                $(".load-video").addClass("page-from-left")
            }
        };
        t.exports = i
    }
    , {}],
    12: [function(e, t) {
        var i = {
            localId: [],
            serverId: [],
            downloadId: [],
            getIds: function(e, t) {
                $.ajax({
                    url: "thirdapp/forum/wxUploadImage",
                    type: "POST",
                    dataType: "json",
                    data: {
                        weixinFileId: t
                    }
                }).then(function(i) {
                    if (i.success) {
                        var n = $("#sendMsg").attr("data-fileids")
                          , a = i.message[t];
                        a ? (n = "" == n ? a : n += "," + a,
                        $("#sendMsg").attr("data-fileids", n).removeClass("bg-gray"),
                        (9 === $(".upload_append_list").length || $(".upload_append_list").length > 9) && $("#add").hide(),
                        $('.upload_delete[data-index="' + e + '"]').attr("data-fileid", a),
                        $("#uploadProgress_" + e).hide()) : $("#uploadImage_" + e).closest(".upload_append_list").remove()
                    } else
                        Tribe.util.tips("上传失败", 2e3),
                        $("#uploadImage_" + e).closest(".upload_append_list").remove()
                }, function() {
                    Tribe.util.tips("上传失败", 2e3);
                    for (var t = 0; t < e.length; t++) {
                        var i = e[t];
                        $("#uploadImage_" + i).closest(".upload_append_list").remove()
                    }
                })
            },
            clickFun: function(e) {
                if (void 0 != typeof e) {
                    var t = e;
                    $(t).parents(".upload_append_list").remove();
                    for (var i = $("#sendMsg").attr("data-fileids").split(","), n = 0; n < i.length; n++)
                        $(t).attr("data-fileid") == i[n] && i.splice(n, 1);
                    $("#sendMsg").attr("data-fileids", i.toString()),
                    0 === i.length && ($("#sendMsg").attr("data-fileids", ""),
                    $("#add").hide()),
                    $(".upload_append_list").length < 9 && ($("#add").css("display", "inline-block"),
                    $(".fileImage").removeAttr("disabled")),
                    $(".upload_append_list").length < 1 && "" == $("#editor").val() && $("#sendMsg").addClass("bg-gray")
                }
            },
            tpl: function(e) {
                var t = ""
                  , i = /\:|\//g
                  , n = e.replace(i, "")
                  , a = this;
                t += '<div data-id="' + n + '" class="upload_append_list"><span class="upload_delete" title="删除" data-index="' + n + '"></span><p><img id="uploadImage_' + n + '" src="' + e + '" class="upload_image" /></p><div class="progress" id="uploadProgress_' + n + '"><div class="progress-bar"></div><img src="thirdapp/forum/img/new_loading.gif" class="loading" /></div></div>';
                var o = $("#add");
                o.before(t),
                $('.upload_delete[data-index="' + n + '"]').on("click", function() {
                    a.clickFun(this)
                })
            },
            wxUpload: function() {
                function e() {
                    var o = i.localId[t].replace(a, "");
                    wx.uploadImage({
                        localId: i.localId[t],
                        isShowProgressTips: 0,
                        success: function(a) {
                            t++,
                            a.serverId ? (i.getIds(o, a.serverId),
                            n > t && e()) : $("#uploadImage_" + o).closest(".upload_append_list").remove()
                        },
                        fail: function() {
                            Tribe.util.tips("上传失败", 2e3),
                            $("#uploadImage_" + o).closest(".upload_append_list").remove(),
                            t++,
                            n > t && e()
                        }
                    })
                }
                var t = 0
                  , i = this
                  , n = i.localId.length
                  , a = /\:|\//g;
                e()
            },
            chooseImg: function() {
                var e, t = this;
                wx.chooseImage({
                    sizeType: ["original"],
                    success: function(i) {
                        t.localId = i.localIds;
                        var n = t.localId.length
                          , a = document.querySelector(".upload-box-container").getElementsByClassName("upload_append_list").length;
                        if (a + n > 9)
                            return n = 9 - a,
                            void Tribe.util.tips("最多只能显示9张图片", 2e3);
                        for (e = 0; e < t.localId.length; e++)
                            t.tpl(t.localId[e]);
                        t.wxUpload()
                    }
                })
            },
            init: function() {
                var e = this;
                $("body").on("click", "#fromWx", function() {
                    e.chooseImg()
                })
            }
        };
        t.exports = i
    }
    , {}],
    13: [function(e, t) {
        function i(e) {
            switch (typeof e) {
            case "string":
                return e;
            case "boolean":
                return e ? "true" : "false";
            case "number":
                return isFinite(e) ? e + "" : "";
            default:
                return ""
            }
        }
        var n = Object.keys && Array.map && Array.isArray ? function(e, t, n) {
            return t = t || "&",
            n = n || "=",
            null === e && (e = void 0),
            "object" == typeof e ? Object.keys(e).map(function(a) {
                var o = encodeURIComponent(i(a)) + n;
                return Array.isArray(e[a]) ? e[a].map(function(e) {
                    return o + encodeURIComponent(i(e))
                }).join(t) : o + encodeURIComponent(i(e[a]))
            }).join(t) : ""
        }
        : function(e, t, n) {
            t = t || "&",
            n = n || "=",
            null === e && (e = void 0);
            var a = "";
            if ("object" == typeof e) {
                var o, r, s, l, c;
                for (c in e)
                    if (e.hasOwnProperty(c))
                        if (o = encodeURIComponent(c) + n,
                        l = e[c],
                        "[object Array]" === Object.prototype.toString.call(e[c]))
                            for (r = 0; r < l.length; r++)
                                s = l[r],
                                a += o + encodeURIComponent(i(s)) + t;
                        else
                            a += o + encodeURIComponent(i(l)) + t;
                a = a.slice(0, a.length - 1)
            }
            return a
        }
          , a = function(e, t, i) {
            t = t || "&",
            i = i || "=";
            var n = {};
            if ("string" != typeof e || !e.length)
                return n;
            var a = /\+/g;
            e = e.split(t);
            for (var o, r, s, l, c = 0, d = e.length; d > c; c++)
                o = e[c].replace(a, "%20"),
                l = o.indexOf(i),
                l >= 0 ? (r = o.slice(0, l),
                s = o.slice(l + 1)) : (r = o,
                s = ""),
                r = decodeURIComponent(r),
                s = decodeURIComponent(s),
                n.hasOwnProperty(r) ? "[object Array]" === Object.prototype.toString.call(n[r]) ? n[r].push(s) : n[r] = [n[r], s] : n[r] = s;
            return n
        }
          , o = {
            parse: a,
            stringify: n
        };
        t.exports = o
    }
    , {}],
    14: [function(e, t) {
        function i(e) {
            for (var t = window.atob(e), i = new ArrayBuffer(t.length), n = new Uint8Array(i), a = 0; a < t.length; a++)
                n[a] = t.charCodeAt(a);
            return new Blob([i],{
                type: "image/png"
            })
        }
        var n = {
            fileInput: null ,
            fileFilter: [],
            filter: function(e) {
                return e
            },
            onSelect: function() {},
            onDelete: function() {},
            onProgress: function() {},
            onSuccess: function() {},
            onFailure: function() {},
            onComplete: function() {},
            onBeforeSend: function() {},
            funGetFiles: function(e) {
                var t = e.target.files || e.dataTransfer.files;
                return this.fileFilter = this.filter(t),
                this.funDealFiles(),
                this
            },
            index: (new Date).getTime(),
            funDealFiles: function() {
                for (var e, t = 0; e = this.fileFilter[t]; t++)
                    e.index = this.index++,
                    this.onSelect(this.fileFilter[t]);
                return this
            },
            funUploadFile: function() {
                for (var e, t = this, i = 0; e = this.fileFilter[i]; i++)
                    !function(e) {
                        var i = new FormData
                          , n = (new Date).getTime();
                        i.append("name", "Html 5 File API/FormData"),
                        i.append("fileToUpload", e, e.name);
                        var a = new XMLHttpRequest;
                        if (a.upload) {
                            t.onBeforeSend(e),
                            a.upload.addEventListener("progress", function(i) {
                                t.onProgress(e, i.loaded, i.total)
                            }, !1),
                            a.onreadystatechange = function() {
                                4 == a.readyState && (200 == a.status && "" != a.responseText && null != a.responseText ? (t.onSuccess(e, a.responseText),
                                t.fileFilter.length || t.onComplete()) : t.onFailure(e, a.responseText))
                            }
                            ;
                            var o = Tribe.networkId || ""
                              , r = Tribe.userId || "";
                            a.open("POST", t.url + "?t=" + n + "&networkId=" + o + "&ownerId=" + r, !0),
                            a.send(i)
                        }
                    }(e)
            },
            uploadFile: function(e) {
                var t = this;
                $.ajax({
                    type: "POST",
                    url: "thirdapp/forum/uploadFile",
                    data: {
                        at: Tribe.util.cookie("at")
                    },
                    success: function(i) {
                        i.success ? (Tribe.util.cookie("at", i.result),
                        t.funUploadFile(e)) : t.onFailure({})
                    },
                    error: function() {
                        t.onFailure({})
                    }
                })
            },
            init: function() {
                var e = this;
                this.fileInput.length && "file" == this.fileInput.attr("type") && !window.user_community ? this.fileInput.on("change", function(t) {
                    e.funGetFiles(t),
                    e.uploadFile(t)
                }, !1) : this.fileInput.on("click", function() {
                    window.user_community.pickImage()
                })
            }
        };
        window.uploadPicture = function(e) {
            var t = i(e);
            t.name = "frombuluo.png";
            var a = {
                target: {
                    files: [t]
                }
            };
            n.funGetFiles(a),
            n.uploadFile(a)
        }
        ,
        t.exports = n
    }
    , {}],
    15: [function(e, t, i) {
        "use strict";
        function n(e, t) {
            if (!(e instanceof t))
                throw new TypeError("Cannot call a class as a function")
        }
        Object.defineProperty(i, "__esModule", {
            value: !0
        });
        {
            var a = function() {
                function e(e, t) {
                    for (var i = 0; i < t.length; i++) {
                        var n = t[i];
                        n.enumerable = n.enumerable || !1,
                        n.configurable = !0,
                        "value"in n && (n.writable = !0),
                        Object.defineProperty(e, n.key, n)
                    }
                }
                return function(t, i, n) {
                    return i && e(t.prototype, i),
                    n && e(t, n),
                    t
                }
            }();
            i.RequestUrl = function() {
                function e() {
                    var t = arguments.length <= 0 || void 0 === arguments[0] ? {} : arguments[0];
                    n(this, e),
                    this.obj = t
                }
                return a(e, [{
                    key: "getNetworkInfo",
                    value: function(e) {
                        var t = $.ajax({
                            url: "",
                            type: "GET",
                            data: {
                                networkId: Tribe.networkId
                            },
                            dataType: "json"
                        });
                        return "function" != typeof e ? t : void e(t)
                    }
                }, {
                    key: "isUserAdmin",
                    value: function(e) {
                        var t = !1;
                        this.getNetworkInfo().then(function(i) {
                            if (i || (t = !1),
                            i) {
                                var n = i.networkOverView.role;
                                "ADMIN" == n && (t = !0)
                            } else
                                t = !1;
                            return "function" != typeof e ? t : void e(t)
                        })
                    }
                }, {
                    key: "hasALLNum",
                    value: function(e) {
                        var t = 0;
                        $.ajax({
                            type: "get",
                            url: "thirdapp/forum/allNum",
                            data: {
                                isIncludeTime: !0
                            },
                            dataType: "json"
                        }).then(function(i) {
                            return i && i.success || (t = 0),
                            i && 0 != i.message.total && (t = i.message.total),
                            "function" != typeof e ? t : void e(t)
                        })
                    }
                }, {
                    key: "createSession",
                    value: function() {
                        var e = this;
                        return $.ajax({
                            type: "POST",
                            url: "thirdapp/forum/uploadFile",
                            data: {
                                at: Tribe.util.cookie("at")
                            },
                            success: function(e) {
                                e.success && Tribe.util.cookie("at", e.result)
                            },
                            error: function() {
                                e.onFailure({})
                            }
                        })
                    }
                }, {
                    key: "showTips",
                    value: function(e) {
                        this.createSession().then(function() {
                            $.ajax({
                                url: "/microblog/rest/snsUser/needTip",
                                type: "POST",
                                dataType: "json",
                                data: e.data
                            }).then(function(t) {
                                t && t.needTip && e.cb()
                            })
                        })
                    }
                }, {
                    key: "closeTip",
                    value: function(e) {
                        $(e.root).on("click", e.hook, function() {
                            $.ajax({
                                url: "/microblog/rest/snsUser/closeTip",
                                type: "POST",
                                dataType: "json",
                                data: e.data
                            }).then(function(t) {
                                t.success && e.cb()
                            })
                        })
                    }
                }, {
                    key: "newFeaturesInit",
                    value: function() {
                        var e = arguments.length <= 0 || void 0 === arguments[0] ? {} : arguments[0]
                          , t = this;
                        t.obj = e,
                        t.newFeaturesTips = {
                            functionName: "newFeaturesTips",
                            networkRelated: !1,
                            version: ""
                        },
                        t.changeTips = {
                            functionName: "changeTips",
                            networkRelated: !1,
                            version: ""
                        };
                        var i = t.obj.wrap;
                        i && (t.newFeaturesTips.version = t.obj.newVersion,
                        t.changeTips.version = t.obj.changeVersion,
                        t.showTips({
                            data: t.newFeaturesTips,
                            cb: function() {
                                i.append('<div style="display:block" class=" j-tips-layer ' + t.obj.cName + '">' + t.obj.content + "</div>")
                            }
                        }),
                        t.closeTip({
                            root: i,
                            hook: ".closeIcon",
                            data: t.newFeaturesTips,
                            cb: function() {
                                $(".j-tips-layer", i).remove()
                            }
                        }))
                    }
                }], [{
                    key: "getInstance",
                    value: function() {
                        for (var e = arguments.length, t = Array(e), i = 0; e > i; i++)
                            t[i] = arguments[i];
                        this.instance || (this.instance = new (Function.prototype.bind.apply(this, [null ].concat(t)))),
                        this.instance.init()
                    }
                }]),
                e
            }()
        }
    }
    , {}],
    16: [function(e, t) {
        var i = {
            isNull: function(e) {
                return null == e || "undefined" == typeof e ? !0 : !1
            },
            isTel: function(e) {
                if (this.isNull(e))
                    return !1;
                if (11 != e.length)
                    return !1;
                var t = /(1[3|5|7|8|][0-9]{9})/g;
                return e.match(t) ? !0 : !1
            },
            isTrim: function(e) {
                if (this.isNull(e))
                    return !1;
                var t = /\S/g
                  , i = e.match(t);
                return i ? !0 : !1
            }
        };
        t.exports = i
    }
    , {}],
    17: [function(e) {
        "use strict";
        function t() {
            var e = location.search;
            if (e) {
                var t = s.parse(e.substring(1).split("#")[0])
                  , i = t.content;
                if (i) {
                    var n = document.getElementById("editor");
                    n.value = i + " ";
                    var a = document.getElementById("sendMsg");
                    a.classList.contains("bg-gray") && a.classList.remove("bg-gray")
                }
            }
        }
        function i() {
            $(".select-site").css("display", "inline-block");
            $(".site-name").text("正在定位中...");
            u.init();
            $("#editor").click();
        }
        var n = e("../component/imgSlider.js")
          , a = e("../component/img-uploader")
          , o = e("../component/wxUploadImage")
          , r = e("../component/topic").Topic
          , s = e("../lib/plugin/querystring")
          , l = e("../component/aite-list")
          , c = /Qing\/.*;(iPhone|Android).*/.test(navigator.userAgent)
          , d = e("../component/alipayModifyUserName")
          , u = e("../component/share-location")
          , p = e("../component/fh")
          , h = e("../component/video")
          , f = e("../lib/public/requestUrl").RequestUrl
          , m = e("../component/openCallFree")
          , v = e("../component/care-public")
          , g = ""
          , b = {
            blueprintId: $("#sendMsg").attr("data-blueprintId"),
            init: function() {
                var e = this;
                Tribe.util.PCTaptoClick($("#sendMsg"), function() {
                    var t = $(this);
                    e.sendPosts(t, !1, !1, !1);
                })
            },
            sendPosts: function(e, t, i, n) {
                var a = this
                  , o = $(e)
                  , r = o.attr("data-fileids");
                r = r && r.split(",") || [];
                var s = o.attr("data-networkid")
                  , l = $.trim($("#editor").val())
                  , c = $(".show-video")
                  , d = $(".j-buyersShowItem")
                  , u = $(".topic-item-mod a.curr").eq(0)
                  , m = $("#sendMsg")
                  , v = ""
                  , b = [o.attr("data-wx-aite"), o.attr("data-yzj-aite")];
                if ("true" == m.attr("data-section") && !u.length && !a.blueprintId)
                    return Tribe.util.tips("发帖前先选择一个分类版块吧", 2e3),
                    !1;
                if (u.length && (v = u.attr("data-sectionId")),
                a.blueprintId && !r.length)
                    return Tribe.util.tips("晒图集赞帖必须带图片", 2e3),
                    !1;
                "" != $("#editor").attr("data-type") && (l = "#" + $("#editor").attr("data-type") + "#" + l);
                var y = $("#phizWrapper");
                if (0 != y.length && y.hide(),
                !o.hasClass("bg-gray")) {
                    if ($(".upload_append_list").length > r.length)
                        return Tribe.util.tips("图片上传中，请稍后", 2e3),
                        !1;
                    "" == $.trim($("#editor").val()) && r.length && (l += "分享图片"),
                    "" == $.trim($("#editor").val()) && c.length > 0 && (l = l + '分享视频"' + g.title + '"');
                    for (var w = 0; w < $(".progress").length; w++)
                        if ($(".progress").eq(w).is(":visible"))
                            return !1;
                    if (!l)
                        return m.addClass("bg-gray"),
                        Tribe.util.tips("发送内容为空", 2e3),
                        !1;
                    if ($("#sending").is(":visible"))
                        return !1;
                    $("body").append('<div class="tips" id="sending" ><span class="loadIng"></span>发送中...</div>');
                    var T = $(".site-name").attr("data-longitude")
                      , k = $(".site-name").attr("data-latitude")
                      , x = $(".site-name").text();
                    ("正在定位中..." == x || "点击开启定位" == x) && (x = "");
                    var C = [];
                    if (0 != $(".show-video").length) {
                        var j = h.videoData;
                        C.push({
                            type: "NETMEDIA",
                            name: j.title,
                            desc: j.desc,
                            originalURL: j.originalURL,
                            embedVideoURL: j.embedVideoURL,
                            thumbPic: j.thumbPic,
                            videoType: j.videoType
                        })
                    }
                    d.length && C.push({
                        type: "PRODUCT",
                        subType: "YOUZAN",
                        name: d.attr("data-goodName"),
                        desc: "",
                        url: d.attr("data-url"),
                        price: d.attr("data-price"),
                        third_id: "",
                        pic_thumb_url: d.attr("data-picPath"),
                        urlShowInTop: !0
                    });
                    var I = !1;
                    0 != $(".j-call-wrap").length && (I = !0);
                    var S = [[], []];
                    $.each(b, function(e, t) {
                        if ("" != t) {
                            var i = t.split(",");
                            $.each(i, function(t, i) {
                                var n = i.split(":");
                                switch (e) {
                                case 0:
                                    S[e].push({
                                        name: n[0],
                                        userId: n[1]
                                    });
                                    break;
                                case 1:
                                    S[e].push({
                                        name: n[0],
                                        personId: n[1]
                                    })
                                }
                            })
                        }
                    });
                    var B = function() {
                        $.ajax({
                            type: "POST",
                            url: "thirdapp/forum/sendMsg",
                            data: {
                                blueprintId: a.blueprintId,
                                networkId: s,
                                content: l,
                                sectionId: v,
                                longitude: T || "-1",
                                latitude: k || "-1",
                                location: x || "",
                                fileids: JSON.stringify([{
                                    networkId: s,
                                    fileIds: r
                                }]),
                                attachFileIds: r,
                                extraAttach: JSON.stringify(C),
                                isOpenCallFree: I,
                                mentionName2IdJSON: JSON.stringify(S[0]),
                                mentionName2PersonIdJSON: JSON.stringify(S[1])
                            },
                            context: $("#msgList"),
                            success: function(e) {
                                if(e.success){
                                    Tribe.util.tips("@all推送成功", 3e3)
                                }else{
                                    Tribe.util.tips("发送失败，请重试", 2e3)
                                }
                                $("#sending").remove();
                            },
                            error: function() {
                                $("#sending").remove(),
                                Tribe.util.tips("发送失败，请重试", 2e3),
                                console.log("Ajax error!")
                            }
                        })
                    }
                      , _ = new f
                      , N = 0
                      , E = function(e) {
                        0 != e && (N = e),
                        B()
                    }
                      , P = function(e) {
                        e ? _.hasALLNum(E) : B()
                    }
                    ;
                    l.match(/@all/g) ? _.isUserAdmin(P) : B()
                }
            }
        }
          , y = {
            init: function() {
                var e = this;
                e._height = $(window).height(),
                $(".video-btn").click(function() {
                    e.getVideo(this)
                }),
                $("a.topic-btn-item").length ? r.getInstance({
                    getHotTopicCallback: function() {
                        e.sendParams()
                    },
                    root: $("#editorWrap")
                }) : ($(".upload-box").show(),
                $(".msg-btn").parent().addClass("curr")),
                $(".topic-btn-item").on("click", function() {
                    e.boxStatus(1, [2, 3, 4, 5, 6, 7])
                }),

                $(".msg-btn").on("click", function(t) {
                    e.getMsg(t, this)
                }),
                $(".phiz-btn").on("click", function(t) {
                    e.getPhiz(t, this)
                }),
                $("#editor").on("click", function(t) {
                    e.editorFocus(t)
                }),
                $(".aite-btn").on("click", function(t) {
                    e.getAite(t, this)
                }),

                $(".phone-btn").on("click", function(t) {
                    e.getPhone(t)
                }),
                $(".buyersShow-btn").on("click", function(t) {
                    e.getTheBuyersShow(t)
                })
            },
            sendParams: function() {
                $.ajax({
                    type: "GET",
                    url: "thirdapp/forum/sendMsg/sendParams",
                    dataType: "json"
                }).done(function(e) {
                    if (e && e.success) {
                        var t = e.message.forceChooseSection
                          , i = $("#sendMsg");
                        t ? i.attr("data-section", "true") : i.attr("data-section", "false")
                    }
                })
            },
            imageOrVideo: function(e) {
                var t;
                switch (e) {
                case 2:
                    t = $(".upload_append_list");
                    break;
                case 1:
                    t = $(".show-video")
                }
                return t && 0 == t.length || !t ? !1 : !0
            },
            getVideo: function(e) {
                var t = e;
                if (this.imageOrVideo(2))
                    return void Tribe.util.tips("图片和视频不能一起上传。", 2e3);
                this.changeStatus(t),
                this.boxStatus(5, [1, 2, 3, 4, 6, 7]);
                var i = function(e) {
                    var t = $(".show-video");
                    0 != t.length && $("#sendMsg").removeClass("bg-gray"),
                    g = e
                }
                ;
                h.init($("#editorWrap"), i)
            },
            changeStatus: function(e) {
                $(".post-func-area").children().removeClass("curr"),
                $(e).parent().addClass("curr")
            },
            getAite: function(e, t) {
                e.preventDefault();
                var i = this
                  , n = $(".person-list-wrapper")
                  , a = {};
                a.boxWrap = $("#editor"),
                a.boxWrap && $("#editor").text($("#editor").val()),
                a.aiteWrap = n,
                a.windowHeight = i._height,
                a.sendBtn = $("#sendMsg");
                var o = new l(a,c)
                  , r = function() {
                    $($(".aite-btn")[0].parentNode).removeClass("curr"),
                    $("body").css("height", "auto"),
                    document.body.style.overflow = "auto",
                    document.documentElement.style.overflow = "auto";
                    var e = document.getElementById("sendMsg");
                    e.classList.contains("bg-gray") && e.classList.remove("bg-gray"),
                    $(".post-func-area li:visible").eq(0).children("a").click()
                }
                ;
                o.init(r),
                this.boxStatus(4, [1, 2, 3, 5, 6, 7]),
                $(".person-list-wrapper").fadeIn()
            },
            getPhiz: function(e, t) {
                e.preventDefault();
                var i = $("#phizWrapper");
                if (1 != i.length || "block" != i[0].style.display) {
                    this.changeStatus(this),
                    Tribe.util.initArr();
                    var n = function() {
                        var e = $("#editor").val()
                          , t = document.getElementById("sendMsg");
                        t.classList.contains("bg-gray") && "" != e && null != e ? t.classList.remove("bg-gray") : t.classList.contains("bg-gray") || "" != e && null != e || t.classList.add("bg-gray")
                    }
                      , t = {};
                    t.editorBox = $("#editor"),
                    t.wrapper = $("#editorWrap"),
                    Tribe.util.init(t, n),
                    this.boxStatus(3, [1, 2, 4, 5, 6, 7])
                }
            },
            getMsg: function(e) {
                return e.preventDefault(),
                this.imageOrVideo(1) ? void Tribe.util.tips("图片和视频不能一起上传。", 2e3) : (this.boxStatus(2, [1, 3, 4, 5, 6, 7]),
                void $(".upload-box").show())
            },
            editorFocus: function() {},
            funcArr: ["topic-item-mod", "upload-box", "phiz-wrapper", "person-list-wrapper", "upload-video", "j-phone-wrapper", "j-buyersShow-wrapper"],
            btnArr: ["topic-btn-item", "msg-btn", "phiz-btn", "aite-btn", "video-btn", "phone-btn", "buyersShow-btn"],
            nowVideoSrc: "",
            boxStatus: function(e, t) {
                for (var i = 0; i < t.length; i++)
                    5 == t[i] && this.videoOption(!1),
                    $("." + this.funcArr[t[i] - 1]).hide(),
                    $("." + this.btnArr[t[i] - 1]).parent().removeClass("curr");
                5 == e && this.videoOption(!0),
                $("." + this.funcArr[e - 1]).show(),
                $("." + this.btnArr[e - 1]).parent().addClass("curr")
            },
            videoSource: "",
            videoOption: function(e) {
                var t = $(".show-video")
                  , i = t.css("display")
                  , n = $(".video-iframe");
                if ("none" == i && e) {
                    {
                        this.videoSource
                    }
                    $(".video-info-mod").before(this.videoTpl()),
                    t.show()
                } else
                    "block" != i || e || (this.videoSource = n.attr("src"),
                    n.remove(),
                    t.hide())
            },
            videoTpl: function() {
                var e = "<iframe class='video-iframe' src='" + this.videoSource + "' frameborder='0' allowfullscreen='' allowtransparency='false' width='100%'> 您的浏览器不支持视频播放</iframe>";
                return _.template(e)()
            },
            setCursorPos: function() {
                Tribe.util.cursorPos = Tribe.util.getCursortPosition($("#editor")[0])
            },
            getPhone: function(e) {
                e.preventDefault(),
                this.boxStatus(6, [1, 2, 3, 4, 5, 7]),
                0 == $(".j-phone-wrapper").length ? this.phoneTpl() : $(".j-phone-wrapper").show()
            },
            phoneTpl: function() {
                var e = "<div class='j-phone-wrapper'>   <h3>添加免费电话</h3>   <p>添加后，隐藏你的真实手机号码，但看帖人仅能通过免费电话联系你，确保信息安全沟通有效。</p>   <a class='blue-text' href='http://www.xingdongliu.com/world/view?key=MDAwMDAwMDAwMDRkNzY2MWFkZTA2'>什么是免费电话？</a>   <button class='j-addCallBtn btn'>确定</button></div>";
                $("body").append(e)
            },
            getTheBuyersShow: function(e) {
                e.preventDefault(),
                this.boxStatus(7, [1, 2, 3, 4, 5, 6]),
                0 == $(".j-buyersShow-wrapper").length ? this.buyersShowTpl() : $(".j-buyersShow-wrapper").show()
            },
            buyersShowTpl: function() {
                var e = "<div class='j-buyersShow-wrapper'><div class='j-buyersShow-div join_pic'>   <input type='button' class='j-addBuyersShow fileImage'/></div></div>";
                $("body").append(e)
            }
        }
          , w = {
            init: function() {
                $(".buyersShow-btn").length && (this.openBuyersShow(),
                this.editOpenedBuyersShow(),
                this.editBuyersShowItem(),
                this.delWarningTpl())
            },
            showOwnCode: function() {
                var e = function() {
                    v.isCarePublic(t)
                }
                  , t = function(e) {
                    !e && Tribe.util.is_weixin() && v.publicArr.isAuthorize && v.showPublicWindow("关注公众号才能知道你买了什么啊")
                }
                  , i = {
                    networkId: Tribe.networkId
                };
                v.init(i),
                $("#detail-msg-reply").length ? v.isShare(e, !0) : v.isShare(e)
            },
            editBuyersShowItem: function() {
                $("body").on("click", ".j-closeBuyersShowItem", function() {
                    $(".j-buyersShow-wrapper").html("<div class='j-buyersShow-div join_pic'>\n                                                <input type=\"button\" class='j-addBuyersShow fileImage'/>\n                                            </div>")
                })
            },
            editOpenedBuyersShow: function() {
                $("body").on("click", ".j-closeOpenedBuyersShow", function() {
                    $(".j-openedBuyersShow").hide()
                }),
                $("body").on("click", ".j-openedBuyersShowItem", function() {
                    var e = $(this)
                      , t = {
                        url: e.attr("data-url"),
                        goodName: e.attr("data-goodName"),
                        price: e.attr("data-price"),
                        picPath: e.attr("data-picPath")
                    };
                    $(".j-buyersShow-wrapper").html('<div class="product-wrap uploadPic-shows j-buyersShowItem" data-url="' + t.url + '" data-goodName="' + t.goodName + '" data-price="' + t.price + '" data-picPath="' + t.picPath + '">\n                                              <a href="javascript:;" class="close-uploadPic j-closeBuyersShowItem">×</a>\n                                              <div class="product-img"><img src="' + t.picPath + '"/></div>\n                                              <div class="product-detail">\n                                                <h3 class="product-title ellipsis">' + t.goodName + '</h3>\n                                                <p class="product-price">' + t.price + '</p>\n                                                <p class="product-tips">商品信息以商家店铺显示为准</p>\n                                              </div>\n                                            </div>'),
                    $(".j-openedBuyersShow").hide()
                })
            },
            warningTpl: function(e) {
                var t = '<div class="warmingWrap BoxWrap confirmStyle02">\n            <div class="confirm-bg"></div>\n            <div class="layer-box">\n                <a class="deleteBtn delBtn j-deleteWarningTpl">×</a>\n                <div class="a-y-s-d">\n                    <p class="a-y-s-d-content" style="text-align: center;">' + e + "</center></p>\n                </div>\n            </div>\n        </div>";
                return t
            },
            delWarningTpl: function() {
                $("body").on("click", ".j-deleteWarningTpl", function(e) {
                    e.preventDefault(),
                    e.stopImmediatePropagation(),
                    $(".warmingWrap").remove()
                }),
                $("body").on("tap", ".j-deleteWarningTpl", function(e) {
                    e.preventDefault(),
                    e.stopImmediatePropagation(),
                    $(".warmingWrap").remove()
                })
            },
            openBuyersShow: function() {
                var e = this;
                $("body").on("click", ".j-addBuyersShow", function() {
                    $.ajax({
                        url: "thirdapp/forum/isFocusPublic",
                        type: "GET",
                        dataType: "json"
                    }).done(function(t) {
                        t && t.message.subscribe ? $.ajax({
                            type: "GET",
                            url: "thirdapp/forum/getBuyersShowList",
                            dataType: "json",
                            data: {}
                        }).then(function(t) {
                            var i = [];
                            if (t.success) {
                                var n = t.message.thirdGoodsList || [];
                                if (n.length)
                                    for (var a = 0; a < n.length; a++) {
                                        var o = n[a];
                                        i.push('<div class="j-openedBuyersShowItem" data-url="' + o.detail_url + '" data-goodName="' + o.goodName + '" data-price="' + o.price + '" data-picPath="' + o.pic_thumb_path + '"><a href="javascript:;" class="product-wrap border border-b">\n                                                                  <div class="product-img"><img src="' + o.pic_thumb_path + '"/></div>\n                                                                  <div class="product-detail">\n                                                                    <h3 class="product-title ellipsis">' + o.goodName + '</h3>\n                                                                    <p class="product-price">￥' + o.price + '</p>\n                                                                    <p class="product-tips">商品信息以商家店铺显示为准</p>\n                                                                  </div></a></div>')
                                    }
                                else
                                    i.push('<div class="yz-shop-uploadPic">你还没有在商户的有赞店铺买过东西</div>');
                                $(".j-openedBuyersShowContent").html(i.join("")).show(),
                                $(".j-openedBuyersShow").show()
                            } else
                                35011 === t.message.error_code ? $("body").append(e.warningTpl("获取不到你的购买记录,因为管理员还没把公众号授权给有赞店铺,快去提醒管理员吧!")) : 33002 === t.message.error_code ? (i.push('<div class="yz-shop-uploadPic">你还没有在商户的有赞店铺买过东西</div>'),
                                $(".j-openedBuyersShowContent").html(i.join("")).show(),
                                $(".j-openedBuyersShow").show()) : "weixin follower not found" === t.message.error_description ? (i.push('<div class="yz-shop-uploadPic">你还没有在商户的有赞店铺买过东西</div>'),
                                $(".j-openedBuyersShowContent").html(i.join("")).show(),
                                $(".j-openedBuyersShow").show()) : $("body").append(e.warningTpl("调用有赞接口错误!"))
                        }) : e.showOwnCode()
                    })
                })
            }
        }
          , T = {
            $buyersShowPage: $(".j-buyersShowPage"),
            init: function() {
                "true" === $("#editor").attr("data-isBuyersShow") && (w.delWarningTpl(),
                this.buyersShowPageInit(),
                this.$buyersShowPage.fadeIn(),
                this.chooseBuyersShow())
            },
            buyersShowPageInit: function() {
                var e = this
                  , t = $(window).height();
                this.$buyersShowPage.css("height", t + "px"),
                $.ajax({
                    url: "thirdapp/forum/isFocusPublic",
                    type: "GET",
                    dataType: "json"
                }).done(function(t) {
                    t && t.message.subscribe ? $.ajax({
                        type: "GET",
                        url: "thirdapp/forum/getBuyersShowList",
                        dataType: "json",
                        data: {}
                    }).then(function(t) {
                        var i = [];
                        if (t.success) {
                            var n = t.message.thirdGoodsList || [];
                            if (n.length)
                                for (var a = 0; a < n.length; a++) {
                                    var o = n[a];
                                    i.push('<div class="j-openedBuyersShowItem" data-url="' + o.detail_url + '" data-goodName="' + o.goodName + '" data-price="' + o.price + '" data-picPath="' + o.pic_thumb_path + '"><a href="javascript:;" class="product-wrap border border-b">\n                                                                  <div class="product-img"><img src="' + o.pic_thumb_path + '"/></div>\n                                                                  <div class="product-detail">\n                                                                    <h3 class="product-title ellipsis">' + o.goodName + '</h3>\n                                                                    <p class="product-price">￥' + o.price + '</p>\n                                                                    <p class="product-tips">商品信息以商家店铺显示为准</p>\n                                                                  </div></a></div>')
                                }
                            else
                                i.push('<div class="commonBuyersShow-tips">你还没有在商户的有赞店铺买过东西</div>');
                            e.$buyersShowPage.html(i.join(""))
                        } else
                            35011 === t.message.error_code ? (i.push('<div class="commonBuyersShow-tips">获取不到你的购买记录,因为管理员还没把公众号授权给有赞店铺,快去提醒管理员吧!</div>'),
                            e.$buyersShowPage.html(i.join(""))) : 33002 === t.message.error_code ? (i.push('<div class="commonBuyersShow-tips">你还没有在商户的有赞店铺买过东西</div>'),
                            e.$buyersShowPage.html(i.join(""))) : "weixin follower not found" === t.message.error_description ? (i.push('<div class="commonBuyersShow-tips">你还没有在商户的有赞店铺买过东西</div>'),
                            e.$buyersShowPage.html(i.join(""))) : (i.push('<div class="commonBuyersShow-tips">调用有赞接口错误!</div>'),
                            e.$buyersShowPage.html(i.join("")))
                    }) : w.showOwnCode()
                })
            },
            chooseBuyersShow: function() {
                var e = this;
                $("body").on("click", ".j-buyersShowPage .j-openedBuyersShowItem", function() {
                    var t = $(this);
                    t.addClass("j-buyersShowItem").siblings().removeClass("j-buyersShowItem"),
                    $(".j-buyersShowPageChosenItem").html(t.html()),
                    e.$buyersShowPage.fadeOut()
                }),
                $(".j-buyersShowPageChosenItem").on("click", function() {
                    var t = $(this);
                    t.html(""),
                    e.$buyersShowPage.fadeIn()
                })
            },
            scrollAuto: function() {
                $("body").css("height", "auto"),
                document.body.style.overflow = "auto",
                document.documentElement.style.overflow = "auto"
            },
            scrollHidden: function() {
                var e = $(window).height();
                $("body").css("height", e + "px"),
                document.body.style.overflow = "hidden",
                document.documentElement.style.overflow = "hidden"
            }
        }
          , k = {
            init: function() {
                this.callWrap = $(".phoneWrap"),
                this.isOpenFreeCall()
            },
            isOpenFreeCall: function() {
                var e = this;
                (new f).getNetworkInfo().then(function(t) {
                    if (!t)
                        return void e.callWrap.hide();
                    var i = t.networkVO.advancedOptions.openFreeCall;
                    if (i) {
                        e.callWrap.show(),
                        x.init(),
                        $("body").on("click", ".j-addCallBtn", function() {
                            e.addCall()
                        });
                        var n = {
                            continueCB: function() {
                                window.location.href = "thirdapp/forum/network/" + Tribe.networkId + "/sendMsg"
                            },
                            cancelCB: function() {
                                $(".j-addCallBtn").removeClass("bg-gray")
                            }
                        };
                        m.init(n),
                        m.getUserInfo().then(function(e) {
                            return e && e.success ? void (m.validMobile = e.message.validMobile) : void (m.validMobile = !1)
                        })
                    } else
                        e.callWrap.hide()
                })
            },
            addCall: function() {
                if (m.validMobile)
                    $(".j-addCallBtn").addClass("bg-gray"),
                    this.callTpl();
                else {
                    var e = {
                        continueCB: function() {
                            window.location.href = "thirdapp/forum/network/" + Tribe.networkId + "/sendMsg"
                        }
                    };
                    m.bindMobileTpl(e)
                }
            },
            callTpl: function() {
                if (0 != $(".j-call-wrap").length)
                    return void $(".j-call-wrap").show();
                var e = "   <a class='j-call-wrap site-btn'>       <i class='contact-icon'></i>       <span class='ellipsis'>免费电话</span>       <span class='site-close j-call-closeBtn'></span>   </a>";
                $(".j-call-free").append(e).show();
                var t = this;
                $(".j-call-free").on("click", ".j-call-closeBtn", function() {
                    $(".j-addCallBtn").removeClass("bg-gray"),
                    t.closeCallIcon()
                })
            },
            closeCallIcon: function() {
                $(".j-call-wrap").remove()
            }
        }
          , x = {
            init: function() {
                var e = new f
                  , t = {
                    wrap: $(".phoneWrap"),
                    content: '<a class="close closeIcon" href="#nolink">×</a><i></i>本社区已开通免费电话功能，请立即体验!',
                    newVersion: "1468548980961",
                    changeVersion: "1468548980961",
                    cName: " tips-tpl-layer"
                };
                e.newFeaturesInit(t)
            }
        };
        Zepto(function(e) {
            function r(e) {
                var t = e.target
                  , i = t.value
                  , n = document.getElementById("sendMsg");
                i ? n.classList.remove("bg-gray") : n.classList.add("bg-gray")
            }
            var s = (e(window).height(),
            document.getElementById("editor"))
              , l = e("#sendMsg");
            s.addEventListener("propertychange", r, !1),
            s.addEventListener("input", r, !1),
            wx.config({
                debug: !1,
                appId: l.attr("data-appid"),
                timestamp: l.attr("data-timestamp"),
                nonceStr: l.attr("data-noncestr"),
                signature: l.attr("data-signature"),
                jsApiList: ["checkJsApi", "getLocation", "chooseImage", "uploadImage", "downloadImage", "previewImage"]
            }),
            wx.ready(function() {
                
                o.init();
            }),
            i(),
            k.init(),
            w.init(),
            T.init(),
            y.init(),
            b.init(),
            navigator.userAgent.indexOf("sendUser") > -1 && "android" == Tribe.util.getOS() && e(".fileImage").attr("type", "button"),
            a.init(),
            new n(document.getElementsByClassName("upload-box-container")[0]).init(),
            t(),
            e(window).on("popstate.topic", function() {
                0 == e(".aite-btn").length || 0 == e(".topic-btn").length || 0 == e(".video-btn").length || e(".video-btn").parent().hasClass("curr") || (e(e(".aite-btn")[0].parentNode).removeClass("curr"),
                e(e(".topic-btn")[0].parentNode).removeClass("curr"),
                y.boxStatus(1, [2, 3, 4, 5, 6, 7]))
            }),
            d()
        })
    }
    , {
        "../component/aite-list": 1,
        "../component/alipayModifyUserName": 2,
        "../component/care-public": 3,
        "../component/fh": 4,
        "../component/img-uploader": 6,
        "../component/imgSlider.js": 7,
        "../component/openCallFree": 8,
        "../component/share-location": 9,
        "../component/topic": 10,
        "../component/video": 11,
        "../component/wxUploadImage": 12,
        "../lib/plugin/querystring": 13,
        "../lib/public/requestUrl": 15
    }],
    18: [function(e, t) {
        !function() {
            "use strict";
            function e(t, i) {
                function a(e, t) {
                    return function() {
                        return e.apply(t, arguments)
                    }
                }
                var o;
                if (i = i || {},
                this.trackingClick = !1,
                this.trackingClickStart = 0,
                this.targetElement = null ,
                this.touchStartX = 0,
                this.touchStartY = 0,
                this.lastTouchIdentifier = 0,
                this.touchBoundary = i.touchBoundary || 10,
                this.layer = t,
                this.tapDelay = i.tapDelay || 200,
                this.tapTimeout = i.tapTimeout || 700,
                !e.notNeeded(t)) {
                    for (var r = ["onMouse", "onClick", "onTouchStart", "onTouchMove", "onTouchEnd", "onTouchCancel"], s = this, l = 0, c = r.length; c > l; l++)
                        s[r[l]] = a(s[r[l]], s);
                    n && (t.addEventListener("mouseover", this.onMouse, !0),
                    t.addEventListener("mousedown", this.onMouse, !0),
                    t.addEventListener("mouseup", this.onMouse, !0)),
                    t.addEventListener("click", this.onClick, !0),
                    t.addEventListener("touchstart", this.onTouchStart, !1),
                    t.addEventListener("touchmove", this.onTouchMove, !1),
                    t.addEventListener("touchend", this.onTouchEnd, !1),
                    t.addEventListener("touchcancel", this.onTouchCancel, !1),
                    Event.prototype.stopImmediatePropagation || (t.removeEventListener = function(e, i, n) {
                        var a = Node.prototype.removeEventListener;
                        "click" === e ? a.call(t, e, i.hijacked || i, n) : a.call(t, e, i, n)
                    }
                    ,
                    t.addEventListener = function(e, i, n) {
                        var a = Node.prototype.addEventListener;
                        "click" === e ? a.call(t, e, i.hijacked || (i.hijacked = function(e) {
                            e.propagationStopped || i(e)
                        }
                        ), n) : a.call(t, e, i, n)
                    }
                    ),
                    "function" == typeof t.onclick && (o = t.onclick,
                    t.addEventListener("click", function(e) {
                        o(e)
                    }, !1),
                    t.onclick = null )
                }
            }
            var i = navigator.userAgent.indexOf("Windows Phone") >= 0
              , n = navigator.userAgent.indexOf("Android") > 0 && !i
              , a = /iP(ad|hone|od)/.test(navigator.userAgent) && !i
              , o = a && /OS 4_\d(_\d)?/.test(navigator.userAgent)
              , r = a && /OS [6-7]_\d/.test(navigator.userAgent)
              , s = navigator.userAgent.indexOf("BB10") > 0;
            e.prototype.needsClick = function(e) {
                switch (e.nodeName.toLowerCase()) {
                case "button":
                case "select":
                case "textarea":
                    if (e.disabled)
                        return !0;
                    break;
                case "input":
                    if (a && "file" === e.type || e.disabled)
                        return !0;
                    break;
                case "label":
                case "iframe":
                case "video":
                    return !0
                }
                return /\bneedsclick\b/.test(e.className)
            }
            ,
            e.prototype.needsFocus = function(e) {
                switch (e.nodeName.toLowerCase()) {
                case "textarea":
                    return !0;
                case "select":
                    return !n;
                case "input":
                    switch (e.type) {
                    case "button":
                    case "checkbox":
                    case "file":
                    case "image":
                    case "radio":
                    case "submit":
                        return !1
                    }
                    return !e.disabled && !e.readOnly;
                default:
                    return /\bneedsfocus\b/.test(e.className)
                }
            }
            ,
            e.prototype.sendClick = function(e, t) {
                var i, n;
                document.activeElement && document.activeElement !== e && document.activeElement.blur(),
                n = t.changedTouches[0],
                i = document.createEvent("MouseEvents"),
                i.initMouseEvent(this.determineEventType(e), !0, !0, window, 1, n.screenX, n.screenY, n.clientX, n.clientY, !1, !1, !1, !1, 0, null ),
                i.forwardedTouchEvent = !0,
                e.dispatchEvent(i)
            }
            ,
            e.prototype.determineEventType = function(e) {
                return n && "select" === e.tagName.toLowerCase() ? "mousedown" : "click"
            }
            ,
            e.prototype.focus = function(e) {
                var t;
                a && e.setSelectionRange && 0 !== e.type.indexOf("date") && "time" !== e.type && "month" !== e.type ? (t = e.value.length,
                e.setSelectionRange(t, t)) : e.focus()
            }
            ,
            e.prototype.updateScrollParent = function(e) {
                var t, i;
                if (t = e.fastClickScrollParent,
                !t || !t.contains(e)) {
                    i = e;
                    do {
                        if (i.scrollHeight > i.offsetHeight) {
                            t = i,
                            e.fastClickScrollParent = i;
                            break
                        }
                        i = i.parentElement
                    } while (i)
                }
                t && (t.fastClickLastScrollTop = t.scrollTop)
            }
            ,
            e.prototype.getTargetElementFromEventTarget = function(e) {
                return e.nodeType === Node.TEXT_NODE ? e.parentNode : e
            }
            ,
            e.prototype.onTouchStart = function(e) {
                var t, i, n;
                if (e.targetTouches.length > 1)
                    return !0;
                if (t = this.getTargetElementFromEventTarget(e.target),
                i = e.targetTouches[0],
                a) {
                    if (n = window.getSelection(),
                    n.rangeCount && !n.isCollapsed)
                        return !0;
                    if (!o) {
                        if (i.identifier && i.identifier === this.lastTouchIdentifier)
                            return e.preventDefault(),
                            !1;
                        this.lastTouchIdentifier = i.identifier,
                        this.updateScrollParent(t)
                    }
                }
                return this.trackingClick = !0,
                this.trackingClickStart = e.timeStamp,
                this.targetElement = t,
                this.touchStartX = i.pageX,
                this.touchStartY = i.pageY,
                e.timeStamp - this.lastClickTime < this.tapDelay && e.preventDefault(),
                !0
            }
            ,
            e.prototype.touchHasMoved = function(e) {
                var t = e.changedTouches[0]
                  , i = this.touchBoundary;
                return Math.abs(t.pageX - this.touchStartX) > i || Math.abs(t.pageY - this.touchStartY) > i ? !0 : !1
            }
            ,
            e.prototype.onTouchMove = function(e) {
                return this.trackingClick ? ((this.targetElement !== this.getTargetElementFromEventTarget(e.target) || this.touchHasMoved(e)) && (this.trackingClick = !1,
                this.targetElement = null ),
                !0) : !0
            }
            ,
            e.prototype.findControl = function(e) {
                return void 0 !== e.control ? e.control : e.htmlFor ? document.getElementById(e.htmlFor) : e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")
            }
            ,
            e.prototype.onTouchEnd = function(e) {
                var t, i, s, l, c, d = this.targetElement;
                if (!this.trackingClick)
                    return !0;
                if (e.timeStamp - this.lastClickTime < this.tapDelay)
                    return this.cancelNextClick = !0,
                    !0;
                if (e.timeStamp - this.trackingClickStart > this.tapTimeout)
                    return !0;
                if (this.cancelNextClick = !1,
                this.lastClickTime = e.timeStamp,
                i = this.trackingClickStart,
                this.trackingClick = !1,
                this.trackingClickStart = 0,
                r && (c = e.changedTouches[0],
                d = document.elementFromPoint(c.pageX - window.pageXOffset, c.pageY - window.pageYOffset) || d,
                d.fastClickScrollParent = this.targetElement.fastClickScrollParent),
                s = d.tagName.toLowerCase(),
                "label" === s) {
                    if (t = this.findControl(d)) {
                        if (this.focus(d),
                        n)
                            return !1;
                        d = t
                    }
                } else if (this.needsFocus(d))
                    return e.timeStamp - i > 100 || a && window.top !== window && "input" === s ? (this.targetElement = null ,
                    !1) : (this.focus(d),
                    this.sendClick(d, e),
                    a && "select" === s || (this.targetElement = null ,
                    e.preventDefault()),
                    !1);
                return a && !o && (l = d.fastClickScrollParent,
                l && l.fastClickLastScrollTop !== l.scrollTop) ? !0 : (this.needsClick(d) || (e.preventDefault(),
                this.sendClick(d, e)),
                !1)
            }
            ,
            e.prototype.onTouchCancel = function() {
                this.trackingClick = !1,
                this.targetElement = null
            }
            ,
            e.prototype.onMouse = function(e) {
                return this.targetElement ? e.forwardedTouchEvent ? !0 : e.cancelable && (!this.needsClick(this.targetElement) || this.cancelNextClick) ? (e.stopImmediatePropagation ? e.stopImmediatePropagation() : e.propagationStopped = !0,
                e.stopPropagation(),
                e.preventDefault(),
                !1) : !0 : !0
            }
            ,
            e.prototype.onClick = function(e) {
                var t;
                return this.trackingClick ? (this.targetElement = null ,
                this.trackingClick = !1,
                !0) : "submit" === e.target.type && 0 === e.detail ? !0 : (t = this.onMouse(e),
                t || (this.targetElement = null ),
                t)
            }
            ,
            e.prototype.destroy = function() {
                var e = this.layer;
                n && (e.removeEventListener("mouseover", this.onMouse, !0),
                e.removeEventListener("mousedown", this.onMouse, !0),
                e.removeEventListener("mouseup", this.onMouse, !0)),
                e.removeEventListener("click", this.onClick, !0),
                e.removeEventListener("touchstart", this.onTouchStart, !1),
                e.removeEventListener("touchmove", this.onTouchMove, !1),
                e.removeEventListener("touchend", this.onTouchEnd, !1),
                e.removeEventListener("touchcancel", this.onTouchCancel, !1)
            }
            ,
            e.notNeeded = function(e) {
                var t, i, a, o;
                if ("undefined" == typeof window.ontouchstart)
                    return !0;
                if (i = +(/Chrome\/([0-9]+)/.exec(navigator.userAgent) || [, 0])[1]) {
                    if (!n)
                        return !0;
                    if (t = document.querySelector("meta[name=viewport]")) {
                        if (-1 !== t.content.indexOf("user-scalable=no"))
                            return !0;
                        if (i > 31 && document.documentElement.scrollWidth <= window.outerWidth)
                            return !0
                    }
                }
                if (s && (a = navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),
                a[1] >= 10 && a[2] >= 3 && (t = document.querySelector("meta[name=viewport]")))) {
                    if (-1 !== t.content.indexOf("user-scalable=no"))
                        return !0;
                    if (document.documentElement.scrollWidth <= window.outerWidth)
                        return !0
                }
                return "none" === e.style.msTouchAction || "manipulation" === e.style.touchAction ? !0 : (o = +(/Firefox\/([0-9]+)/.exec(navigator.userAgent) || [, 0])[1],
                o >= 27 && (t = document.querySelector("meta[name=viewport]"),
                t && (-1 !== t.content.indexOf("user-scalable=no") || document.documentElement.scrollWidth <= window.outerWidth)) ? !0 : "none" === e.style.touchAction || "manipulation" === e.style.touchAction ? !0 : !1)
            }
            ,
            e.attach = function(t, i) {
                return new e(t,i)
            }
            ,
            "function" == typeof define && "object" == typeof define.amd && define.amd ? define(function() {
                return e
            }) : "undefined" != typeof t && t.exports ? (t.exports = e.attach,
            t.exports.FastClick = e) : window.FastClick = e
        }()
    }
    , {}]
}, {}, [17]);
